<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Retro Terminal Webpage</title>
    <style>
        body {
            margin: 0;
            font-family: 'Courier New', monospace;
            background-color: #000000; /* helt svart */
            color: #00FF00;
            display: flex;
            flex-direction: row;
            height: 100vh;
        }

        .menu, .content {
            padding: 10px;
            box-sizing: border-box;
        }

        .menu {
            width: 200px;
            background-color: #000000; /* helt svart */
            border-right: 1px solid #333;
        }

        .menu button {
            display: block;
            width: 100%;
            background: none;
            border: none;
            color: #00FF00;
            text-align: left;
            padding: 5px 0;
            cursor: pointer;
            font-size: 16px;
        }

        .menu button:hover {
            background-color: #222;
        }

        .content {
            flex: 1;
            background-color: #000000; /* helt svart */
            padding: 20px;
            overflow-y: auto; /* Lägg till scrollbar om innehållet är för stort */
        }

        /* Blinkande text effekt */
        .blink {
            animation: blinker 1s linear infinite;
        }

        @keyframes blinker {
            50% {
                opacity: 0;
            }
        }

        /* Stil för prompt-block */
        .prompt-block {
            margin-bottom: 20px;
            padding: 10px;
            border: 1px dashed #00FF00;
            white-space: pre-wrap;
        }

        /* Specifik stil för träningsmenyn när den laddas in */
        .training-menu {
            background-color: #000000;
            border-bottom: 1px solid #333;
            padding: 10px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 6px;
        }

        .training-menu button {
            background: none;
            border: none;
            color: #00FF00;
            font-size: 16px;
            padding: 5px 10px;
            cursor: pointer;
            text-align: left;
        }

        .training-menu button:hover {
            background-color: #222;
        }

        .training-prompt-window {
            flex: 1;
            background-color: #000000;
            padding: 20px;
            overflow-y: auto;
            border: 1px solid #333;
            margin: 10px 0;
        }

        .training-status {
            background-color: #000000;
            border-top: 1px solid #333;
            padding: 5px 10px;
            font-size: 14px;
        }

        /* Stil för klickbara övningar (specifik för träningsmodulen) */
        .exercise-item {
            cursor: pointer;
            text-decoration: none;
            display: block;
            padding: 5px 0;
            margin-bottom: 2px;
            white-space: pre-wrap;
        }

        .exercise-item:hover {
            background-color: #222;
        }

        /* Stil för dagstiteln i träningsmodulen */
        .training-day-title {
            display: block;
            margin-bottom: 10px;
            white-space: pre-wrap;
        }


        @media (max-width: 600px) {
            body {
                flex-direction: column;
            }

            .menu {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #333;
            }

            .content {
                padding: 10px;
            }

            .training-menu {
                flex-direction: column;
                align-items: stretch;
            }

            .training-menu button {
                font-size: 14px;
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="menu">
        <button onclick="showContent('home')">> Home</button>
        <button onclick="showContent('training')">> Training</button>
        <button onclick="showContent('about')">> About</button>
        <button onclick="showContent('contact')">> Contact</button>
    </div>
    <div class="content" id="content">
    </div>

    <script>
        // Funktion för att ladda JavaScript dynamiskt
        let loadedScripts = {}; // Håller reda på vilka scripts som redan laddats

        function loadScript(src, callback) {
            if (loadedScripts[src]) {
                if (callback) callback();
                return;
            }

            let script = document.createElement('script');
            script.src = src;
            script.onload = () => {
                loadedScripts[src] = true;
                if (callback) callback();
            };
            script.onerror = () => {
                console.error(`Failed to load script: ${src}`);
                if (callback) callback(new Error(`Failed to load script: ${src}`));
            };
            document.head.appendChild(script);
        }

        function showContent(section) {
            const contentDiv = document.getElementById('content');
            
            // Mappar sektionsnamn till filvägar
            const contentPaths = {
                'home': 'content/home.html',
                'training': 'content/training.html',
                'about': 'content/about.html',
                'contact': 'content/contact.html'
            };

            const scriptToLoad = {
                'training': 'js/training-module.js'
            };

            // Stoppa eventuell aktiv animation från föregående sida (t.ex. home)
            if (window.stopHomeAnimation && typeof window.stopHomeAnimation === 'function') {
                window.stopHomeAnimation();
            }

            // Hämta HTML-innehållet
            fetch(contentPaths[section])
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.text();
                })
                .then(html => {
                    contentDiv.innerHTML = html; // Ladda in HTML-innehållet

                    // Ladda sedan motsvarande JavaScript om det finns
                    if (scriptToLoad[section]) {
                        loadScript(scriptToLoad[section], (error) => {
                            if (error) {
                                contentDiv.innerHTML = `<div class="prompt-block">[ERROR] Kunde inte ladda modul: ${section}.</div>`;
                            } else {
                                // Om det är träningssidan och du vill visa standardmeddelandet efter laddning:
                                if (section === 'training') {
                                    const trainingTerminal = document.getElementById('trainingTerminal');
                                    if (trainingTerminal && !trainingTerminal.querySelector('.prompt-block')) {
                                        // Kontrollera om den redan har innehåll, annars visa standardmeddelandet
                                        trainingTerminal.innerHTML = '<div class="prompt-block">[SYSTEM] Välj en dag för att visa träningsdata.</div>';
                                    }
                                }
                                // Speciell hantering för home-sidan: starta dess animation
                                if (section === 'home' && window.startHomeAnimation && typeof window.startHomeAnimation === 'function') {
                                    window.startHomeAnimation();
                                }
                            }
                        });
                    } else {
                        // Om ingen specifik JS behövs, och det är home-sidan, starta animationen
                        if (section === 'home' && window.startHomeAnimation && typeof window.startHomeAnimation === 'function') {
                            window.startHomeAnimation();
                        }
                    }
                })
                .catch(e => {
                    console.error('Error loading content:', e);
                    contentDiv.innerHTML = `<div class="prompt-block">[ERROR] Kunde inte ladda sida: ${section}.</div>`;
                });
        }

        // Ladda startsidan vid första besöket
        document.addEventListener('DOMContentLoaded', () => {
            showContent('home');
        });
    </script>
</body>
</html>